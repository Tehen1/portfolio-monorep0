{
  "$schema": "https://schemas.anthropic.com/mcp/2024-12/mcp-config-schema.json",
  "version": "1.0.0",
  "metadata": {
    "projectName": "FixieRun",
    "environment": "production",
    "deploymentRegion": "EU-West-1",
    "lastUpdated": "2025-12-10T00:55:00Z",
    "maintainer": "FixieRun Development Team",
    "documentation": "https://docs.fixierun.dev/mcp"
  },

  "mcpServers": {
    "snyk-security": {
      "enabled": true,
      "priority": "CRITICAL",
      "type": "security-scanner",
      "description": "Real-time vulnerability scanning and compliance monitoring",
      "configuration": {
        "apiEndpoint": "https://api.snyk.io/v1",
        "scanInterval": "on-commit",
        "severityThreshold": "high",
        "complianceFrameworks": ["SOC2", "GDPR", "ISO27001"],
        "integration": {
          "github": {
            "enabled": true,
            "webhookEvents": ["push", "pull_request"]
          },
          "slack": {
            "enabled": true,
            "alertChannel": "#security-alerts",
            "criticalPingRole": "@security-team"
          },
          "discord": {
            "enabled": true,
            "webhook": "${DISCORD_SECURITY_WEBHOOK}"
          }
        },
        "actions": {
          "onCritical": "block-deployment",
          "onHigh": "require-review",
          "onMedium": "warn-only",
          "autoRemediation": true
        }
      },
      "secrets": {
        "SNYK_API_TOKEN": "${env:SNYK_API_TOKEN}",
        "SNYK_ORG_ID": "${env:SNYK_ORG_ID}"
      },
      "healthCheck": {
        "endpoint": "https://api.snyk.io/v1/health",
        "interval": 300,
        "timeout": 10
      }
    },

    "ipfs-storage": {
      "enabled": true,
      "priority": "HIGH",
      "type": "decentralized-storage",
      "description": "IPFS integration for NFT metadata and asset pinning",
      "configuration": {
        "provider": "Pinata",
        "apiEndpoint": "https://api.pinata.cloud",
        "gatewayUrl": "https://gateway.pinata.cloud",
        "fallbackGateway": "https://ipfs.io",
        "pinning": {
          "strategy": "automatic",
          "replicas": 3,
          "duration": "permanent",
          "regions": ["EU", "US", "APAC"]
        },
        "contentTypes": {
          "nftMetadata": {
            "maxSize": "10MB",
            "format": "application/json",
            "version": "1.0"
          },
          "nftAssets": {
            "maxSize": "500MB",
            "formats": ["image/png", "image/jpeg", "image/webp", "video/mp4"]
          },
          "trackingData": {
            "maxSize": "50MB",
            "format": "application/json"
          }
        },
        "caching": {
          "enabled": true,
          "ttl": 86400,
          "strategy": "aggressive"
        }
      },
      "secrets": {
        "PINATA_API_KEY": "${env:PINATA_API_KEY}",
        "PINATA_API_SECRET": "${env:PINATA_API_SECRET}"
      }
    },

    "n8n-automation": {
      "enabled": true,
      "priority": "HIGH",
      "type": "workflow-automation",
      "description": "Automated CI/CD, webhooks, and cross-service integration",
      "configuration": {
        "apiEndpoint": "https://n8n.fixierun.dev/api",
        "workflows": {
          "ci-cd-pipeline": {
            "trigger": "github-push",
            "steps": [
              {
                "id": "lint",
                "action": "eslint-typescript",
                "failOnError": true
              },
              {
                "id": "test",
                "action": "jest-unit-tests",
                "coverage": {
                  "minimum": 95,
                  "failOnLower": true
                }
              },
              {
                "id": "security-scan",
                "action": "snyk-integration",
                "wait": true
              },
              {
                "id": "smart-contract-audit",
                "action": "foundry-forge",
                "tests": ["unit", "integration", "fuzzing"],
                "gasReport": true
              },
              {
                "id": "build",
                "action": "nextjs-build",
                "optimizations": ["minify", "code-split"]
              },
              {
                "id": "deploy-preview",
                "action": "vercel-deploy",
                "environment": "preview"
              }
            ]
          },
          "nft-metadata-sync": {
            "trigger": "schedule",
            "cronExpression": "0 */6 * * *",
            "steps": [
              {
                "id": "fetch-metadata",
                "action": "blockchain-call",
                "contract": "FixieNFT",
                "method": "tokenMetadataURI"
              },
              {
                "id": "upload-ipfs",
                "action": "ipfs-pin",
                "gateway": "pinata"
              },
              {
                "id": "update-db",
                "action": "supabase-update",
                "table": "nft_metadata"
              }
            ]
          },
          "tracking-data-aggregate": {
            "trigger": "schedule",
            "cronExpression": "0 2 * * *",
            "steps": [
              {
                "id": "aggregate",
                "action": "sql-aggregate",
                "database": "supabase"
              },
              {
                "id": "generate-stats",
                "action": "calculate-metrics"
              },
              {
                "id": "notify-users",
                "action": "send-notifications"
              }
            ]
          }
        },
        "webhooks": {
          "github": {
            "events": ["push", "pull_request", "release"],
            "endpoint": "https://n8n.fixierun.dev/webhook/github"
          },
          "vercel": {
            "events": ["deployment.created", "deployment.ready"],
            "endpoint": "https://n8n.fixierun.dev/webhook/vercel"
          },
          "blockchain": {
            "events": ["NFTMinted", "NFTEquipped", "ActivityRecorded"],
            "endpoint": "https://n8n.fixierun.dev/webhook/blockchain"
          }
        }
      },
      "secrets": {
        "N8N_AUTH_TOKEN": "${env:N8N_AUTH_TOKEN}",
        "N8N_ENCRYPTION_KEY": "${env:N8N_ENCRYPTION_KEY}"
      }
    },

    "github-integration": {
      "enabled": true,
      "priority": "HIGH",
      "type": "repository-management",
      "description": "GitHub repository management and CI/CD orchestration",
      "configuration": {
        "repository": "fixierun/fixierun-monorepo",
        "defaultBranch": "main",
        "branchProtection": {
          "main": {
            "requirePullRequestReviews": 2,
            "dismissStaleReviews": true,
            "requireCodeOwnerReviews": true,
            "restrictPushes": ["admin"]
          },
          "develop": {
            "requirePullRequestReviews": 1,
            "dismissStaleReviews": true
          }
        },
        "codeOwners": [
          "*.ts @fixierun/typescript-team",
          "*.sol @fixierun/solidity-team",
          ".github/workflows/* @fixierun/devops-team",
          "src/components/* @fixierun/frontend-team"
        ],
        "workflows": {
          "typescript-lint": {
            "file": ".github/workflows/typescript.yml",
            "enabled": true
          },
          "security-scan": {
            "file": ".github/workflows/security.yml",
            "enabled": true
          },
          "smart-contract-audit": {
            "file": ".github/workflows/foundry.yml",
            "enabled": true
          },
          "deployment": {
            "file": ".github/workflows/deploy.yml",
            "enabled": true
          }
        },
        "releaseManagement": {
          "strategy": "semantic-versioning",
          "autoGenerate": true,
          "changelog": true,
          "draftRelease": false
        }
      },
      "secrets": {
        "GITHUB_TOKEN": "${env:GITHUB_TOKEN}",
        "GITHUB_APP_ID": "${env:GITHUB_APP_ID}"
      }
    },

    "vercel-deployment": {
      "enabled": true,
      "priority": "CRITICAL",
      "type": "deployment-platform",
      "description": "Vercel deployment with Edge Functions and analytics",
      "configuration": {
        "projectId": "${env:VERCEL_PROJECT_ID}",
        "teamId": "${env:VERCEL_TEAM_ID}",
        "environments": {
          "production": {
            "domain": "fixierun.app",
            "branch": "main",
            "buildCommand": "pnpm build",
            "installCommand": "pnpm install --frozen-lockfile",
            "outputDirectory": ".next",
            "environmentVariables": {
              "NODE_ENV": "production",
              "NEXT_PUBLIC_ENV": "production"
            }
          },
          "preview": {
            "branch": "*",
            "buildCommand": "pnpm build",
            "installCommand": "pnpm install --frozen-lockfile",
            "previewComments": true
          },
          "development": {
            "branch": "develop",
            "buildCommand": "pnpm build:dev",
            "installCommand": "pnpm install"
          }
        },
        "edgeFunctions": {
          "enabled": true,
          "runtime": "node",
          "regions": ["iad1", "fra1", "sin1"],
          "performanceTarget": {
            "p99": 50,
            "p95": 30,
            "p50": 10
          }
        },
        "webVitals": {
          "enabled": true,
          "tracking": true,
          "alertThresholds": {
            "FCP": 3000,
            "LCP": 2500,
            "CLS": 0.1,
            "TTFB": 600
          }
        },
        "analytics": {
          "enabled": true,
          "dashboards": ["web-vitals", "performance", "errors"]
        }
      },
      "secrets": {
        "VERCEL_TOKEN": "${env:VERCEL_TOKEN}",
        "VERCEL_ORG_ID": "${env:VERCEL_ORG_ID}"
      }
    }
  },

  "globalConfiguration": {
    "errorHandling": {
      "strategy": "cascade-with-fallback",
      "retryPolicy": {
        "maxAttempts": 3,
        "backoffMultiplier": 2,
        "initialDelayMs": 1000
      },
      "notifications": {
        "channels": ["slack", "discord", "email"],
        "severityLevels": {
          "critical": ["all"],
          "high": ["slack", "discord"],
          "medium": ["slack"],
          "low": ["logging"]
        }
      }
    },
    "monitoring": {
      "enabled": true,
      "metrics": {
        "interval": 60,
        "retention": 2592000
      },
      "logging": {
        "level": "info",
        "format": "json",
        "destination": "cloudwatch"
      },
      "tracing": {
        "enabled": true,
        "samplingRate": 0.1
      }
    },
    "security": {
      "encryption": {
        "algorithm": "aes-256-gcm",
        "keyRotation": 90
      },
      "rateLimit": {
        "enabled": true,
        "requestsPerSecond": 100
      },
      "corsPolicy": {
        "allowedOrigins": ["https://fixierun.app", "https://*.fixierun.app"],
        "allowedMethods": ["GET", "POST", "PUT", "DELETE"],
        "allowedHeaders": ["Content-Type", "Authorization"]
      }
    }
  },

  "deploymentChecklist": {
    "preDeployment": [
      "All TypeScript compilation errors resolved",
      "Test coverage â‰¥ 95%",
      "Security scan passed (Snyk)",
      "Smart contract audit completed",
      "Performance budget satisfied",
      "Documentation updated"
    ],
    "deployment": [
      "Vercel preview deployed",
      "N8N workflows tested",
      "IPFS pinning verified",
      "GitHub Actions passed",
      "Monitoring enabled"
    ],
    "postDeployment": [
      "Smoke tests passed",
      "Web Vitals checked",
      "Error tracking enabled",
      "Analytics verified",
      "Team notifications sent"
    ]
  },

  "rollbackProcedure": {
    "enabled": true,
    "automaticTrigger": {
      "errorRateThreshold": 0.05,
      "timeoutThreshold": 5000,
      "responseTimeThreshold": 2000
    },
    "manualTrigger": {
      "requiresApproval": 2,
      "approvers": ["@fixierun/devops-leads"]
    },
    "notification": {
      "channels": ["slack", "discord", "email"],
      "recipients": ["@devops-team", "@engineering-leads"]
    }
  }
}
